var c=Object.defineProperty;var u=(o,s,e)=>s in o?c(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e;var n=(o,s,e)=>(u(o,typeof s!="symbol"?s+"":s,e),e);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&t(d)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();class h{constructor(s,e=[],t=""){n(this,"node");this.node=document.createElement(s),this.node.classList.add(...e),this.node.textContent=t}insertChild(s){this.node.append(s.getNode())}insertChildren(s){s.forEach(e=>{this.insertChild(e)})}setContent(s){this.node.textContent=s}setInnerHTML(s){this.node.innerHTML=s}getNode(){return this.node}addClass(s){this.node.classList.add(s)}addListener(s,e){this.node.addEventListener(s,e)}removeListener(s,e){this.node.removeEventListener(s,e)}setAttribute(s,e){this.node.setAttribute(s,e)}hasAttribute(s){return this.node.hasAttribute(s)}removeAttribute(s){this.node.removeAttribute(s)}removeNode(){this.node.remove()}}class l extends h{constructor(e,t){super("canvas");n(this,"context");this.context=this.node.getContext("2d"),this.node.width=e,this.node.height=t}setLineProperties(e,t,i){this.context&&(this.context.strokeStyle=e,this.context.lineWidth=t,this.context.lineCap=i??"butt")}drawLine(e,t,i,r){this.context&&(this.context.beginPath(),this.context.moveTo(e,t),this.context.lineTo(i,r),this.context.stroke())}drawCircle(e,t,i){this.context&&(this.context.beginPath(),this.context.arc(e,t,i,0,2*Math.PI),this.context.stroke())}clearCanvas(){this.context&&this.context.clearRect(0,0,this.node.width,this.node.height)}}class w extends l{constructor(){super(400,300);n(this,"drawingSteps");this.addClass("gallows"),this.setLineProperties("black",5,"round"),this.drawGallows(),this.drawingSteps=[()=>{this.drawCircle(260,100,20)},()=>{this.drawLine(260,120,260,180)},()=>{this.drawLine(260,140,280,160)},()=>{this.drawLine(260,140,240,160)},()=>{this.drawLine(260,180,240,200)},()=>{this.drawLine(260,180,280,200)}]}drawGallows(){this.drawLine(40,240,360,240),this.drawLine(80,239,80,42),this.drawLine(80,41,260,40),this.drawLine(80,80,120,42),this.drawLine(260,40,260,80)}drawStep(e){const t=this.drawingSteps[e-1];t&&t()}getNumberOfDrawingSteps(){return this.drawingSteps.length}newDraw(){this.clearCanvas(),this.drawGallows()}}function p(o,s){const e=[];let t=o.charCodeAt(0);const i=s.charCodeAt(0);for(;t<=i;)e.push(String.fromCharCode(t)),t++;return e}class m extends h{constructor(e){super("div",["keyboard"]);n(this,"handleKeyDownBound");n(this,"handleKeyboardClickBound");n(this,"quiz");n(this,"keys");this.keys=new Map,this.quiz=e,this.createKeyboard(),this.handleKeyDownBound=this.handleKeyDown.bind(this),this.handleKeyboardClickBound=this.handleKeyboardClick.bind(this),this.setEvents()}setEvents(){window.addEventListener("keydown",this.handleKeyDownBound),this.addListener("click",this.handleKeyboardClickBound)}handleKeyboardClick(e){const t=e.target;t.tagName==="BUTTON"&&this.checkKeyState(t.innerText)}handleKeyDown(e){if(e.ctrlKey)return;const t=e.key.toLowerCase();this.checkKeyState(t)}checkKeyState(e){if(!/[a-z]/.test(e))return;const t=this.keys.get(e);t&&!t.hasAttribute("disabled")&&(t.setAttribute("disabled","true"),this.quiz.checkGuess(e))}updateKeys(){this.keys.forEach(e=>{e.removeAttribute("disabled")})}createKeyboard(){const e=p("a","z").map(t=>{const i=new h("button",["key"],t);return this.keys.set(t,i),i});this.insertChildren(e)}}class f extends h{constructor(e,t){super("div",["quiz"]);n(this,"question");n(this,"answer");n(this,"keyboard");n(this,"attempts");n(this,"parent");n(this,"wrongGuesses");n(this,"maxWrongGuesses");n(this,"questionText");n(this,"answerText");n(this,"hiddenAnswer");n(this,"letterIndexes");n(this,"keys");this.parent=e,this.hiddenAnswer=[],this.letterIndexes=new Map,this.keys=new Map,this.question=new h("p",["question"]),this.answer=new h("p",["answer"]),this.attempts=new h("p",["attempts"]),this.keyboard=new m(this),this.wrongGuesses=0,this.maxWrongGuesses=t,this.questionText="",this.answerText="",this.setAttempts(),this.insertChildren([this.question,this.answer,this.attempts,this.keyboard])}setQuestionAndAnswer(){this.question.setContent(this.questionText),this.answerText&&(Array.from(this.answerText.toLowerCase()).forEach((e,t)=>{var i;e!==" "&&(this.letterIndexes.has(e)||this.letterIndexes.set(e,[]),(i=this.letterIndexes.get(e))==null||i.push(t))}),this.hiddenAnswer=Array.from(this.answerText.replace(/[a-zA-Z]/g,"_")),this.answer.setContent(this.hiddenAnswer.join("")))}setAttempts(){this.attempts.setContent(`Attempts: ${this.wrongGuesses.toString()}/${this.maxWrongGuesses.toString()}`)}newQuiz({question:e,answer:t}){this.clearGame(),this.answerText=t,this.questionText=e,this.setQuestionAndAnswer()}clearGame(){this.wrongGuesses=0,this.setAttempts(),this.letterIndexes.clear(),this.keyboard.updateKeys()}checkGuess(e){const t=this.letterIndexes.get(e);if(t){for(const i of t){const r=this.answerText[i];r&&(this.hiddenAnswer[i]=r)}this.answer.setContent(this.hiddenAnswer.join("")),this.hiddenAnswer.join("")===this.answerText&&this.parent.showModal("game-win")}else this.wrongGuesses++,this.parent.wrongGuess(this.wrongGuesses),this.setAttempts(),this.wrongGuesses===this.maxWrongGuesses&&this.parent.showModal("game-over")}}const a=[{question:"What is the capital of France?",answer:"Paris"},{question:"Who is CEO of Tesla?",answer:"Elon Musk"},{question:"The iPhone was created by which company?",answer:"Apple"},{question:"What is the richest man in the world?",answer:"Jeff Bezos"}];class g extends h{constructor(){super("div",["app"]);n(this,"quiz");n(this,"gallows");n(this,"currentQuestion");n(this,"modal");this.gallows=new w,this.quiz=new f(this,this.gallows.getNumberOfDrawingSteps()),this.modal=new h("div",["modal"]),this.currentQuestion=Math.floor(Math.random()*a.length);const e=a[this.currentQuestion];e&&this.quiz.newQuiz(e),this.insertChildren([this.gallows,this.quiz])}newGame(){this.modal.removeNode(),this.gallows.newDraw();const e=this.currentQuestion;do this.currentQuestion=Math.floor(Math.random()*a.length);while(this.currentQuestion==e);const t=a[this.currentQuestion];t&&this.quiz.newQuiz(t)}showModal(e){this.modal.removeNode(),this.modal.setInnerHTML(`<h1>${e}</h1>`);const t=new h("button",["restart-button"]);t.setInnerHTML("Restart"),t.addListener("click",()=>{this.newGame()}),this.modal.insertChild(t),this.insertChild(this.modal)}wrongGuess(e){this.gallows.drawStep(e)}}class x{constructor(s,e){n(this,"root");n(this,"element");this.root=e,this.element=s}start(){this.root.append(this.element)}}new x(new g().getNode(),document.body).start();
//# sourceMappingURL=index-Cvu5srRC.js.map
